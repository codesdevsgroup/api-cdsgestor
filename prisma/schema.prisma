generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id              String    @id @default(cuid())
  email           String    @unique
  username        String    @unique
  password        String
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  deletedAt       DateTime?
  role            Int       @default(1)
  personId        Int?      @unique
  Person          Person?   @relation(fields: [personId], references: [id])
  companyConfigId Int?

  @@map("users")
}

model Person {
  id           Int        @id @default(autoincrement())
  nome         String
  nomeFantasia String?
  tipo         TipoPerson
  cpf          String?
  cnpj         String?
  ie           String?
  email        String
  telefone     String?
  celular      String?
  dateNasc     DateTime?
  observacoes  String?
  inadiplente  Boolean    @default(false)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  deletedAt    DateTime?
  Users        Users[]
  Address      Address[]

  @@map("person")
}

enum TipoPerson {
  FISICA
  JURIDICA
  PRODUTOR_RURAL
}

model Address {
  id           Int       @id @default(autoincrement())
  place        String
  number       String
  neighborhood String
  city         String
  state        String
  cep          String
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  deletedAt    DateTime?
  personId     Int
  Person       Person    @relation(fields: [personId], references: [id])

  @@map("address")
}

model Company {
  id           Int            @id @default(autoincrement())
  name         String
  email        String
  cel          String
  place        String
  number       String
  neighborhood String
  city         String
  state        String
  cep          String
  workingHours WorkingHours[]

  @@map("company")
}

model WorkingHours {
  id         Int       @id @default(autoincrement())
  day        Weekday
  open       DateTime
  close      DateTime
  lunchStart DateTime?
  lunchEnd   DateTime?
  companyId  Int
  Company    Company   @relation(fields: [companyId], references: [id])

  @@map("working_hours")
}

enum Weekday {
  MONDAY
  TUESDAY
  WEDNESDAY
  THURSDAY
  FRIDAY
  SATURDAY
  SUNDAY
}
